# アラートの設定

SORACOM Lagoonでは、センサの値をトリガーにアラート設定をすることができます。

![](../../../../images/agri/example/soracom/alart/alert_setting/alert_1.jpg#center)

[参照画像：SORACOM ユーザードキュメント Alert の概要](https://users.soracom.io/ja-jp/docs/lagoon-v3/alert-overview/)


Alert設定に関する設定のために、以下の5つの項目が用意されております。
また、「**Alert rule**」、「**Contact point**」、「**Notification policy**」の3つの設定をメインに利用して、Alert を設定していきます。

- **Alert rules**：特定条件下でアラートを発生させるルールを定義
- **Contact points**：アラート通知を受け取る連絡先を設定
- **Notification policies**：アラート通知の送信ルールとタイミングをカスタマイズ
- **Silences**：一時的に特定アラートの通知を停止する設定
- **Groups**：アラートをカテゴリー別にグループ化して管理


![](../../../../images/agri/example/soracom/alart/alert_setting/alert_2.jpg#center)

#### データの変換
- **Math**
- **Reduce**
- **Resample**
- **Classic condition**
- **Threshold**

- **Math**
データセットに対して数学的な操作を適用します。例えば、データポイントの値に対して加算、減算、乗算、除算などの演算を行い、結果を変換します。

- **Reduce**
一連のデータポイントを集約して単一の値に減らします。これには、平均（Mean）、最小値（Min）、最大値（Max）などの集約関数を使用して、データセット全体を代表する単一の値を求めることができます。

- **Resample**
データセットのサンプリングレートを変更します。特定の時間間隔でデータを再サンプリングして、データの密度を調整したり、異なる時間間隔でのデータ比較を可能にします。

- **Classic condition**
古典的な条件式を使用してデータセットを評価し、特定の条件を満たすかどうかを判断します。これは、特定の閾値を基にしたシンプルなif-thenルールによるアラート条件の設定に利用されます。

- **Threshold**
データポイントが特定の閾値を超えた場合にアラートをトリガーする条件を設定します。閾値は静的に設定することも、時間や他の条件に応じて動的に変更することも可能です。


### Reduceを選んだ際の設定項目

##### Function
- **Min**
- **Max**
- **Mean**
- **Sum**
- **Count**
- **Last**

- **Min**
データセット内の最小値を求めます。これは、観測期間内での最小のデータポイントを特定するのに使用されます。

- **Max**
データセット内の最大値を求めます。最大値を把握することで、特定期間内のピーク値を識別できます。

- **Mean**
データセットの平均値を計算します。データの一般的な傾向や中心を理解するのに役立ちます。

- **Sum**
データセット内の全データポイントの合計値を求めます。これは、特定期間内の総量や総活動量を測定するのに適しています。

- **Count**
データセット内のデータポイントの数をカウントします。これにより、観測期間内のサンプルの総数やイベントの発生回数を知ることができます。

- **Last**
データセット内の最後のデータポイントを取得します。最新の観測値や状態を確認するのに使用されます。


##### Mode
- **Strict**
- **Drop Non-numeric Values** 
- **Replace Non-numeric Values**

- **Strict**
すべてのクエリ結果が数値であることを要求します。非数値が含まれる場合、アラート条件の評価はエラーとなります。このモードは、データの整合性を厳密に保ちたい場合に適しています。

- **Drop Non-numeric Values** 
数値でない結果を無視（ドロップ）し、数値のみを条件評価に使用します。このオプションは、非数値のデータポイントが時々現れるが、アラートの評価には数値データのみが重要な場合に便利です。

- **Replace Non-numeric Values**
非数値のデータポイントを特定の数値（通常は0）で置き換えてから条件評価を行います。これは、非数値データをある程度のデフォルト値で扱いたい場合や、全てのデータポイントを評価に含めたいが、一部が非数値である可能性がある場合に適しています。


### 参考資料

- [Soracom Alert ドキュメンテーション](https://users.soracom.io/ja-jp/docs/lagoon-v3/alert-overview/)
